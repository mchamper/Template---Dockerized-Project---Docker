<ng-container *ngIf="{
  isLoading: form.requestH.isLoading$() | async,
  isSuccess: form.requestH.isSuccess$() | async
} as vm">
  <ng-container *ngIf="vm.isSuccess; else noSuccessTpl">
    <nz-alert
      nzType="success"
      [nzMessage]="message"
      [nzDescription]="description"
      nzShowIcon
    >
      <ng-template #message>
        <strong>Solicitud enviada</strong>
      </ng-template>

      <ng-template #description>
        Se le ha enviado un email de solicitud de cambio de contraseña a la dirección de correo ingresada. Por favor, siga las instrucciones allí especificadas.
      </ng-template>
    </nz-alert>
  </ng-container>

  <ng-template #noSuccessTpl>
    <app-request-handler [form]="form">
      <form class="form-default floating-label" nz-form nzLayout="vertical" [formGroup]="form.group" (ngSubmit)="request()">
        <div class="row">
          <nz-form-item>
            <nz-form-control>
              <nz-form-label>Email</nz-form-label>
              <input nz-input formControlName="email">
            </nz-form-control>
          </nz-form-item>
        </div>

        <div class="mt-3">
          <button [appLoadingBtn]="vm.isLoading" class="btn btn-primary">
            Solicitar cambio de contraseña
          </button>
        </div>
      </form>
    </app-request-handler>
  </ng-template>
</ng-container>
